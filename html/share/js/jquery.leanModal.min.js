// leanModal v1.1 by Ray Stone - http://finelysliced.com.au, changed by Beaky
// Dual licensed under the MIT and GPL
(function($) {
    $.fn.extend({
        leanModal: function(options) 
        {
            var defaults = {
                top: 100,
                overlay: 0.65,
                closeButton: null
            };
            
            options = $.extend(defaults, options);

            var o = options;
            var modal_id = $(this);
            $("#lean_overlay").click(function() {
                $(modal_id).closeModal()
            });
            $(o.closeButton).click(function() {
                $(modal_id).closeModal()
            });
            var modal_height = $(modal_id).outerHeight();
            var modal_width = $(modal_id).outerWidth();
            $("#lean_overlay").css({
                "display": "block",
                opacity: 0
            });
            $("#lean_overlay").fadeTo(200, o.overlay);
            $(modal_id).css({
                "display": "block",
                "position": "fixed",
                "opacity": 0,
                "z-index": 200000000,
                "top": o.top + "px"
            });
            $(modal_id).fadeTo(200, 1);
        },
        closeModal: function () 
        {
        	var modal_id = $(this);
            $("#lean_overlay").fadeOut(200);
            $(modal_id).css({
                "display": "none"
            });
        }
    })
})(jQuery);